<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="android-chrome-512x512.png" type="image/x-icon">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JY20JB7P0D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JY20JB7P0D');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temperature Converter | Convert Celsius, Fahrenheit, Kelvin & Rankine</title>
    <meta name="description" content="Free online temperature converter. Convert between Celsius, Fahrenheit, Kelvin, and Rankine with precision. Real-time conversions with history tracking.">
    <meta name="keywords" content="temperature converter, celsius to fahrenheit, fahrenheit to celsius, kelvin converter, rankine converter, temperature calculator">
    <meta name="author" content="Temperature Converter">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Temperature Converter | Convert Celsius, Fahrenheit, Kelvin & Rankine">
    <meta property="og:description" content="Free online temperature converter. Convert between Celsius, Fahrenheit, Kelvin, and Rankine with precision.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://example.com/temperature-converter-preview.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Temperature Converter | Convert Celsius, Fahrenheit, Kelvin & Rankine">
    <meta name="twitter:description" content="Free online temperature converter. Convert between Celsius, Fahrenheit, Kelvin, and Rankine with precision.">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Temperature Converter",
        "description": "Free online temperature converter that converts between Celsius, Fahrenheit, Kelvin, and Rankine with precision control.",
        "url": "https://example.com/temperature-converter",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "permissions": "browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "Temperature Converter"
        },
        "featureList": [
            "Real-time temperature conversion",
            "Multiple temperature scales (Celsius, Fahrenheit, Kelvin, Rankine)",
            "Adjustable precision",
            "Conversion history",
            "Export results as CSV/JSON"
        ]
    }
    </script>
    
    <style>
        :root {
            --primary-color: #2c7a7b;
            --primary-dark: #285e61;
            --primary-light: #81e6d9;
            --secondary-color: #ed8936;
            --text-color: #2d3748;
            --light-bg: #f7fafc;
            --white: #ffffff;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .converter-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            text-align: center;
            padding: 2.5rem 1rem;
            margin-bottom: 2rem;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .converter-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .converter-header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .breadcrumb {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--primary-light);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .breadcrumb span {
            margin: 0 8px;
            color: var(--primary-light);
        }

        .app-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 992px) {
            .app-container {
                grid-template-columns: 1fr 1fr;
            }
        }

        .converter-card, .history-card {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            transition: var(--transition);
        }

        .converter-card:hover, .history-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 0.5rem;
        }

        .card-title svg {
            width: 24px;
            height: 24px;
            fill: var(--primary-color);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-color);
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(44, 122, 123, 0.2);
        }

        .conversion-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: end;
            margin-bottom: 1.5rem;
        }

        .swap-btn {
            background: var(--white);
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 0.5rem;
        }

        .swap-btn:hover {
            background: var(--primary-light);
            border-color: var(--primary-color);
        }

        .swap-btn svg {
            width: 20px;
            height: 20px;
            fill: var(--primary-color);
        }

        .precision-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .precision-control label {
            margin-bottom: 0;
            white-space: nowrap;
        }

        .precision-control select {
            width: auto;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-light);
        }

        .btn-orange {
            background: var(--secondary-color);
            color: white;
        }

        .btn-orange:hover {
            background: #dd6b20;
            transform: translateY(-2px);
        }

        .result-container {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-radius: var(--border-radius);
            padding: 2rem;
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .result-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .result-meta {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .result-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .btn-result {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-result:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .btn-result svg {
            width: 16px;
            height: 16px;
            fill: white;
        }

        .quick-presets {
            margin-top: 1.5rem;
        }

        .preset-title {
            font-size: 1rem;
            margin-bottom: 0.8rem;
            color: var(--text-color);
        }

        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }

        .preset-btn {
            background: var(--primary-light);
            border: 1px solid var(--primary-color);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--primary-dark);
        }

        .preset-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .history-actions {
            display: flex;
            gap: 0.8rem;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
            transition: var(--transition);
        }

        .history-item:hover {
            background: var(--light-bg);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-conversion {
            font-weight: 600;
        }

        .history-details {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
        }

        .history-actions-item {
            display: flex;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-color);
            color: white;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        footer {
            margin-top: 2rem;
            text-align: center;
            color: var(--text-color);
            font-size: 0.9rem;
            padding: 1.5rem;
            border-top: 1px solid #e2e8f0;
        }

        .seo-content {
            position: absolute;
            left: -10000px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        .warning {
            color: #e53e3e;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .empty-state {
            text-align: center;
            color: var(--text-color);
            opacity: 0.7;
            padding: 2rem;
        }
    </style>
</head>
<body>
    <!-- Hidden SEO content for search engines -->
    <div class="seo-content">
        <h1>Temperature Converter</h1>
        <p>Free online temperature converter tool that converts between Celsius (°C), Fahrenheit (°F), Kelvin (K), and Rankine (°R) temperature scales. Features real-time conversion, adjustable precision, conversion history, and export options.</p>
        <h2>Key Features</h2>
        <ul>
            <li>Convert between Celsius, Fahrenheit, Kelvin, and Rankine</li>
            <li>Real-time conversion as you type</li>
            <li>Adjustable decimal precision from 0 to 8 places</li>
            <li>Conversion history with local storage</li>
            <li>Export results as CSV or JSON</li>
            <li>Copy and share conversion results</li>
            <li>Mobile-responsive design</li>
        </ul>
        <h2>Common Temperature Conversions</h2>
        <ul>
            <li>0° Celsius to Fahrenheit: 32°F</li>
            <li>100° Celsius to Fahrenheit: 212°F</li>
            <li>32° Fahrenheit to Celsius: 0°C</li>
            <li>212° Fahrenheit to Celsius: 100°C</li>
            <li>0° Celsius to Kelvin: 273.15K</li>
            <li>0° Kelvin to Celsius: -273.15°C</li>
        </ul>
    </div>

    <div class="container">
        <header class="converter-header">
            <div class="breadcrumb">
                <a href="#">Home</a> <span>&gt;</span> <a href="#">Temperature Calculators</a> <span>&gt;</span> <span>Temperature Converter</span>
            </div>
            <h1>Temperature Converter</h1>
            <p>Convert between Celsius, Fahrenheit, Kelvin, and Rankine. Real-time conversions with history tracking.</p>
        </header>

        <div class="app-container">
            <div class="converter-card">
                <h2 class="card-title">
                    <svg viewBox="0 0 24 24">
                        <path d="M12,2C12,2 9,5 9,9C9,11.76 11.24,14 14,14C16.76,14 19,11.76 19,9C19,5 16,2 16,2C16,2 15,4 12,4C9,4 8,2 8,2C8,2 5,5 5,9C5,14.42 9.58,19 15,19C20.42,19 25,14.42 25,9C25,5 22,2 22,2C22,2 21,4 18,4C15,4 14,2 14,2C14,2 13,4 10,4C7,4 6,2 6,2Z" />
                    </svg>
                    Convert Temperature
                </h2>

                <div class="input-group">
                    <label for="amount">Temperature Value</label>
                    <input type="text" id="amount" placeholder="Enter temperature (e.g. 25, -40, 3.2e2)" inputmode="decimal">
                </div>

                <div class="conversion-row">
                    <div class="input-group">
                        <label for="fromUnit">From Unit</label>
                        <select id="fromUnit"></select>
                    </div>
                    
                    <button class="swap-btn" id="swapBtn" title="Swap units">
                        <svg viewBox="0 0 24 24">
                            <path d="M6.99,11L3,15L6.99,19V16H14V14H6.99V11Z M21,9L17.01,5V8H10V10H17.01V13L21,9Z" />
                        </svg>
                    </button>
                    
                    <div class="input-group">
                        <label for="toUnit">To Unit</label>
                        <select id="toUnit"></select>
                    </div>
                </div>

                <div class="precision-control">
                    <label for="precision">Decimal Precision:</label>
                    <select id="precision">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4" selected>4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="convertBtn">
                        <svg viewBox="0 0 24 24" width="18" height="18">
                            <path d="M19,12L13,18V15H6V13H13V10L19,12Z" />
                        </svg>
                        Convert
                    </button>
                    <button class="btn btn-secondary" id="resetBtn">Reset</button>
                </div>

                <div class="result-container">
                    <div class="result-value" id="resultValue">—</div>
                    <div class="result-meta" id="resultMeta">Enter a temperature value to convert</div>
                </div>

                <div class="result-actions">
                    <button class="btn-result" id="copyBtn">
                        <svg viewBox="0 0 24 24">
                            <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" />
                        </svg>
                        Copy
                    </button>
                    <button class="btn-result" id="shareBtn">
                        <svg viewBox="0 0 24 24">
                            <path d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" />
                        </svg>
                        Share
                    </button>
                    <button class="btn-result" id="downloadResultBtn">
                        <svg viewBox="0 0 24 24">
                            <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                        </svg>
                        Download
                    </button>
                </div>

                <div class="warning" id="warning"></div>

                <div class="quick-presets">
                    <div class="preset-title">Quick Temperature Presets:</div>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-value="0" data-from="C" data-to="F">0°C → °F</button>
                        <button class="preset-btn" data-value="100" data-from="C" data-to="F">100°C → °F</button>
                        <button class="preset-btn" data-value="32" data-from="F" data-to="C">32°F → °C</button>
                        <button class="preset-btn" data-value="-40" data-from="C" data-to="F">-40°C → °F</button>
                        <button class="preset-btn" data-value="0" data-from="C" data-to="K">0°C → K</button>
                        <button class="preset-btn" data-value="273.15" data-from="K" data-to="C">273.15K → °C</button>
                    </div>
                </div>
            </div>

            <div class="history-card">
                <div class="history-header">
                    <h2 class="card-title">
                        <svg viewBox="0 0 24 24">
                            <path d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3" />
                        </svg>
                        Conversion History
                    </h2>
                    <div class="history-actions">
                        <button class="btn btn-orange btn-small" id="exportAllBtn">Export CSV</button>
                        <button class="btn btn-secondary btn-small" id="clearHistoryBtn">Clear</button>
                    </div>
                </div>

                <div class="history-list" id="historyList">
                    <div class="empty-state">
                        No conversions yet. Convert a temperature to see history here.
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Temperature Converter &copy; 2023 | All conversions use Kelvin as the base unit. Values below absolute zero (-273.15°C) are physically invalid.</p>
        </footer>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Temperature units
        const UNITS = {
            C: { name: 'Celsius', symbol: '°C' },
            F: { name: 'Fahrenheit', symbol: '°F' },
            K: { name: 'Kelvin', symbol: 'K' },
            R: { name: 'Rankine', symbol: '°R' }
        };

        // DOM elements
        const amountEl = document.getElementById('amount');
        const fromUnitEl = document.getElementById('fromUnit');
        const toUnitEl = document.getElementById('toUnit');
        const precisionEl = document.getElementById('precision');
        const convertBtn = document.getElementById('convertBtn');
        const resetBtn = document.getElementById('resetBtn');
        const swapBtn = document.getElementById('swapBtn');
        const resultValueEl = document.getElementById('resultValue');
        const resultMetaEl = document.getElementById('resultMeta');
        const copyBtn = document.getElementById('copyBtn');
        const shareBtn = document.getElementById('shareBtn');
        const downloadResultBtn = document.getElementById('downloadResultBtn');
        const historyListEl = document.getElementById('historyList');
        const exportAllBtn = document.getElementById('exportAllBtn');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const toastEl = document.getElementById('toast');
        const warningEl = document.getElementById('warning');

        // Populate unit dropdowns
        function populateUnits() {
            Object.keys(UNITS).forEach(unit => {
                const fromOption = document.createElement('option');
                fromOption.value = unit;
                fromOption.textContent = `${UNITS[unit].symbol} - ${UNITS[unit].name}`;
                fromUnitEl.appendChild(fromOption);

                const toOption = fromOption.cloneNode(true);
                toUnitEl.appendChild(toOption);
            });
            
            fromUnitEl.value = 'C';
            toUnitEl.value = 'F';
        }

        // Conversion functions
        function toKelvin(value, unit) {
            switch(unit) {
                case 'C': return value + 273.15;
                case 'F': return (value + 459.67) * 5/9;
                case 'K': return value;
                case 'R': return value * 5/9;
                default: throw new Error('Unknown unit');
            }
        }

        function fromKelvin(kelvin, unit) {
            switch(unit) {
                case 'C': return kelvin - 273.15;
                case 'F': return kelvin * 9/5 - 459.67;
                case 'K': return kelvin;
                case 'R': return kelvin * 9/5;
                default: throw new Error('Unknown unit');
            }
        }

        // Format number with precision
        function formatNumber(num, precision) {
            if (!isFinite(num)) return String(num);
            return Number(num).toLocaleString(undefined, {
                minimumFractionDigits: 0,
                maximumFractionDigits: precision
            });
        }

        // Perform conversion
        function performConversion() {
            const inputValue = parseFloat(amountEl.value);
            const fromUnit = fromUnitEl.value;
            const toUnit = toUnitEl.value;
            const precision = parseInt(precisionEl.value);
            
            // Hide warning
            warningEl.style.display = 'none';
            
            // Validate input
            if (isNaN(inputValue)) {
                resultValueEl.textContent = '—';
                resultMetaEl.textContent = 'Enter a valid temperature value';
                return;
            }
            
            try {
                // Convert to Kelvin first
                const kelvinValue = toKelvin(inputValue, fromUnit);
                
                // Check for absolute zero violation
                if (kelvinValue < 0) {
                    resultValueEl.textContent = '—';
                    resultMetaEl.textContent = 'Invalid temperature';
                    warningEl.textContent = 'Temperature cannot be below absolute zero (-273.15°C)';
                    warningEl.style.display = 'block';
                    return;
                }
                
                // Convert to target unit
                const resultValue = fromKelvin(kelvinValue, toUnit);
                const formattedResult = formatNumber(resultValue, precision);
                
                // Update UI
                resultValueEl.textContent = formattedResult;
                resultMetaEl.textContent = `${inputValue} ${UNITS[fromUnit].symbol} = ${formattedResult} ${UNITS[toUnit].symbol}`;
                
                // Add to history
                addToHistory(inputValue, fromUnit, resultValue, toUnit, precision);
                
            } catch (error) {
                resultValueEl.textContent = 'Error';
                resultMetaEl.textContent = 'Conversion failed';
                console.error(error);
            }
        }

        // History management
        const STORAGE_KEY = 'temperatureConverterHistory';
        
        function loadHistory() {
            try {
                return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            } catch (e) {
                return [];
            }
        }
        
        function saveHistory(history) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(history.slice(0, 50))); // Keep last 50 entries
        }
        
        function addToHistory(inputValue, fromUnit, resultValue, toUnit, precision) {
            const history = loadHistory();
            const entry = {
                timestamp: new Date().toISOString(),
                inputValue,
                fromUnit,
                resultValue,
                toUnit,
                precision
            };
            
            history.unshift(entry);
            saveHistory(history);
            renderHistory();
        }
        
        function renderHistory() {
            const history = loadHistory();
            historyListEl.innerHTML = '';
            
            if (history.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.textContent = 'No conversions yet. Convert a temperature to see history here.';
                historyListEl.appendChild(emptyState);
                return;
            }
            
            history.forEach(entry => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const conversion = document.createElement('div');
                conversion.className = 'history-conversion';
                conversion.textContent = `${entry.inputValue} ${UNITS[entry.fromUnit].symbol} → ${formatNumber(entry.resultValue, entry.precision)} ${UNITS[entry.toUnit].symbol}`;
                
                const details = document.createElement('div');
                details.className = 'history-details';
                details.textContent = new Date(entry.timestamp).toLocaleString();
                
                const actions = document.createElement('div');
                actions.className = 'history-actions-item';
                
                const copyBtn = document.createElement('button');
                copyBtn.className = 'btn btn-secondary btn-small';
                copyBtn.textContent = 'Copy';
                copyBtn.onclick = () => {
                    const text = `${entry.inputValue} ${UNITS[entry.fromUnit].symbol} = ${formatNumber(entry.resultValue, entry.precision)} ${UNITS[entry.toUnit].symbol}`;
                    copyToClipboard(text);
                };
                
                actions.appendChild(copyBtn);
                
                historyItem.appendChild(conversion);
                historyItem.appendChild(details);
                historyItem.appendChild(actions);
                
                historyListEl.appendChild(historyItem);
            });
        }
        
        function clearHistory() {
            if (confirm('Are you sure you want to clear all conversion history?')) {
                localStorage.removeItem(STORAGE_KEY);
                renderHistory();
            }
        }
        
        function exportHistory() {
            const history = loadHistory();
            if (history.length === 0) {
                showToast('No history to export');
                return;
            }
            
            const headers = ['Timestamp', 'Input Value', 'From Unit', 'Result Value', 'To Unit', 'Precision'];
            const csvContent = [
                headers.join(','),
                ...history.map(entry => [
                    entry.timestamp,
                    entry.inputValue,
                    entry.fromUnit,
                    entry.resultValue,
                    entry.toUnit,
                    entry.precision
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'temperature-conversion-history.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('History exported as CSV');
        }

        // Utility functions
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(
                () => showToast('Copied to clipboard'),
                () => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showToast('Copied to clipboard');
                }
            );
        }
        
        function showToast(message) {
            toastEl.textContent = message;
            toastEl.classList.add('show');
            setTimeout(() => {
                toastEl.classList.remove('show');
            }, 3000);
        }
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Event listeners
        convertBtn.addEventListener('click', performConversion);
        
        resetBtn.addEventListener('click', () => {
            amountEl.value = '';
            fromUnitEl.value = 'C';
            toUnitEl.value = 'F';
            precisionEl.value = '4';
            resultValueEl.textContent = '—';
            resultMetaEl.textContent = 'Enter a temperature value to convert';
            warningEl.style.display = 'none';
        });
        
        swapBtn.addEventListener('click', () => {
            const temp = fromUnitEl.value;
            fromUnitEl.value = toUnitEl.value;
            toUnitEl.value = temp;
            performConversion();
        });
        
        copyBtn.addEventListener('click', () => {
            if (resultValueEl.textContent !== '—') {
                const text = `${resultValueEl.textContent} ${UNITS[toUnitEl.value].symbol}`;
                copyToClipboard(text);
            }
        });
        
        shareBtn.addEventListener('click', () => {
            if (resultValueEl.textContent !== '—') {
                const text = `${amountEl.value} ${UNITS[fromUnitEl.value].symbol} = ${resultValueEl.textContent} ${UNITS[toUnitEl.value].symbol}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Temperature Conversion',
                        text: text,
                        url: window.location.href
                    }).catch(err => {
                        console.log('Error sharing:', err);
                    });
                } else {
                    copyToClipboard(text);
                }
            }
        });
        
        downloadResultBtn.addEventListener('click', () => {
            if (resultValueEl.textContent !== '—') {
                const data = {
                    inputValue: amountEl.value,
                    fromUnit: fromUnitEl.value,
                    resultValue: resultValueEl.textContent,
                    toUnit: toUnitEl.value,
                    precision: precisionEl.value,
                    timestamp: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `temperature-conversion-${Date.now()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Conversion saved as JSON');
            }
        });
        
        exportAllBtn.addEventListener('click', exportHistory);
        clearHistoryBtn.addEventListener('click', clearHistory);
        
        // Quick preset buttons
        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                amountEl.value = btn.dataset.value;
                fromUnitEl.value = btn.dataset.from;
                toUnitEl.value = btn.dataset.to;
                performConversion();
            });
        });
        
        // Real-time conversion with debounce
        const debouncedConvert = debounce(performConversion, 500);
        amountEl.addEventListener('input', debouncedConvert);
        fromUnitEl.addEventListener('change', performConversion);
        toUnitEl.addEventListener('change', performConversion);
        precisionEl.addEventListener('change', performConversion);

        // Initialize
        populateUnits();
        renderHistory();
    </script>
</body>
  </html>
